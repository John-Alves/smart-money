<ion-header>
  <ion-navbar>
    <ion-title>Novo Lançamento</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form [formGroup]='entryForm'>
    <ion-list>
      <ion-item>
        <label>Valor</label>
        <input type="tel" 
          name='amount' 
          formControlName='amount' 
          [(ngModel)]="entry.amount"
          currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"/>
      </ion-item>
      <ion-item class="error" no-lines *ngIf="entryForm.controls.amount.hasError('required') && entryForm.controls.amount.touched">
        <span>O campo valor é obrigatório!</span>
      </ion-item>

      <ion-item>
        <label>Categoria</label>
        <select name='category_id' formControlName='category_id' [(ngModel)]="entry.category_id" required>
          <option value="" selected>Selecione uma opção</option>
          
          <option *ngFor="let category of categories" [value]="category.id">
            {{category.name}}
          </option>
        </select>
      </ion-item>
      <ion-item class="error" no-lines *ngIf="entryForm.controls.category_id.hasError('required') && entryForm.controls.category_id.touched">
        <span>O campo categoria deve ser selecionado!</span>
      </ion-item>

      <ion-item>
        <button ion-button [disabled]="!entryForm.valid" (click)="submitForm()">Adicionar</button>
      </ion-item>

    </ion-list>
  </form>
</ion-content>
